<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Новогодняя Викторина - Карточки</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        body {
            font-family: 'Cinzel', 'Georgia', serif;
            background: linear-gradient(135deg, #0a0f2c, #1a0b2e, #0a0f2c);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            color: #fff;
            -webkit-tap-highlight-color: transparent;
            position: relative;
        }

        .game-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 94vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            padding: 20px;
        }

        .title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 38px;
            color: #FFD700;
            text-shadow: 
                0 4px 8px rgba(0,0,0,0.7),
                0 0 20px rgba(255,215,0,0.4),
                0 0 40px rgba(255,215,0,0.3);
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-family: 'Cinzel', serif;
            background: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: titleGradient 3s ease infinite;
        }

        @keyframes titleGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
        }

        .card {
            background: linear-gradient(145deg, #1a237e, #283593, #1a237e);
            border-radius: 20px;
            padding: 25px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 
                0 10px 25px rgba(0,0,0,0.4),
                inset 0 0 15px rgba(255,215,0,0.1);
            border: 2px solid rgba(255,215,0,0.3);
            position: relative;
            overflow: hidden;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,215,0,0.1), transparent);
            transform: rotate(45deg);
            transition: transform 0.6s ease;
        }

        .card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 
                0 20px 40px rgba(255,215,0,0.4),
                inset 0 0 25px rgba(255,215,0,0.2);
            border-color: #FFD700;
            z-index: 20;
        }

        .card:hover::before {
            transform: rotate(135deg);
        }

        .card-icon {
            font-size: 48px;
            margin-bottom: 15px;
            text-shadow: 0 3px 6px rgba(0,0,0,0.5);
            transition: transform 0.3s ease;
        }

        .card:hover .card-icon {
            transform: scale(1.2) rotate(10deg);
        }

        .card-title {
            font-size: 18px;
            font-weight: bold;
            color: #e3f2fd;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            line-height: 1.4;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 11, 46, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background: linear-gradient(145deg, #1a0b2e, #2d1b5e, #1a0b2e);
            padding: 50px;
            border-radius: 32px;
            max-width: 90%;
            width: 550px;
            text-align: center;
            box-shadow: 
                0 25px 60px rgba(255,215,0,0.5),
                inset 0 0 30px rgba(255,215,0,0.2);
            transform: scale(0.7) rotateX(30deg);
            transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 4px solid #FFD700;
            position: relative;
            overflow: hidden;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255,215,0,0.1), transparent 30%);
            animation: rotate 6s linear infinite;
            z-index: -1;
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        .modal.active .modal-content {
            transform: scale(1) rotateX(0deg);
        }

        .modal h2 {
            margin-bottom: 40px;
            color: #FFD700;
            font-size: 34px;
            text-shadow: 0 4px 8px rgba(0,0,0,0.6);
            font-weight: bold;
            background: linear-gradient(45deg, #FFD700, #FF6B6B, #4ECDC4, #FFE66D);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 300% 300%;
            animation: gradientShift 4s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .modal p {
            margin-bottom: 45px;
            font-size: 23px;
            line-height: 1.6;
            color: #e3f2fd;
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .modal-buttons {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .modal-btn {
            padding: 20px 35px;
            border: 3px solid #FFD700;
            border-radius: 22px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background: rgba(255,255,255,0.1);
            color: #e3f2fd;
            text-align: left;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(8px);
            transform-style: preserve-3d;
        }

        .modal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,215,0,0.6), transparent);
            transition: left 0.8s;
            z-index: 1;
        }

        .modal-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(255,255,255,0.2), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .modal-btn:hover {
            background: rgba(255,215,0,0.25);
            transform: translateX(15px) scale(1.08) translateZ(10px);
            color: #FFD700;
            box-shadow: 0 12px 30px rgba(255,215,0,0.4);
        }

        .modal-btn:hover::before {
            left: 100%;
        }

        .modal-btn:hover::after {
            opacity: 1;
        }

        .modal-feedback {
            margin-top: 35px;
            font-weight: bold;
            min-height: 45px;
            font-size: 26px;
            color: #FFD700;
            text-shadow: 0 0 18px rgba(255,215,0,0.7);
            animation: feedbackPulse 1s ease-in-out;
        }

        @keyframes feedbackPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.25); }
            100% { transform: scale(1); }
        }

        .snow {
            position: absolute;
            background: radial-gradient(circle, white 0%, rgba(255,255,255,0) 80%);
            border-radius: 50%;
            opacity: 0.95;
            pointer-events: none;
            box-shadow: 0 0 15px rgba(255,255,255,0.9);
            z-index: 1;
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.7);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
            animation: float 8s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-100px) rotate(180deg); opacity: 1; }
        }

        /* Magical glow effect for correct answers */
        .correct-glow {
            animation: correctGlow 2s ease-in-out;
            background: linear-gradient(145deg, #1a237e, #27ae60, #1a237e) !important;
            border-color: #2ecc71 !important;
        }

        @keyframes correctGlow {
            0% { box-shadow: 0 10px 25px rgba(46,204,113,0.6); }
            50% { box-shadow: 0 20px 50px rgba(46,204,113,0.8), inset 0 0 30px rgba(46,204,113,0.3); }
            100% { box-shadow: 0 10px 25px rgba(46,204,113,0.6); }
        }

        .incorrect-glow {
            animation: incorrectGlow 2s ease-in-out;
            background: linear-gradient(145deg, #1a237e, #e74c3c, #1a237e) !important;
            border-color: #e74c3c !important;
        }

        @keyframes incorrectGlow {
            0% { box-shadow: 0 10px 25px rgba(231,76,60,0.6); }
            50% { box-shadow: 0 20px 50px rgba(231,76,60,0.8), inset 0 0 30px rgba(231,76,60,0.3); }
            100% { box-shadow: 0 10px 25px rgba(231,76,60,0.6); }
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 20px;
            }
            
            .card {
                padding: 20px 15px;
                min-height: 160px;
            }
            
            .card-icon {
                font-size: 40px;
                margin-bottom: 12px;
            }
            
            .card-title {
                font-size: 16px;
            }
            
            .title {
                font-size: 32px;
                margin-bottom: 25px;
            }
            
            .modal-content {
                padding: 40px;
                width: 480px;
            }
            
            .modal p {
                font-size: 20px;
                margin-bottom: 40px;
            }
            
            .modal-btn {
                font-size: 18px;
                padding: 18px 30px;
            }
            
            .modal h2 {
                font-size: 28px;
                margin-bottom: 35px;
            }
        }

        @media (max-width: 480px) {
            .cards-container {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 18px;
            }
            
            .card {
                padding: 18px 12px;
                min-height: 140px;
            }
            
            .card-icon {
                font-size: 36px;
                margin-bottom: 10px;
            }
            
            .card-title {
                font-size: 14px;
            }
            
            .title {
                font-size: 26px;
                margin-bottom: 20px;
            }
            
            .modal-content {
                padding: 35px;
                width: 400px;
            }
            
            .modal p {
                font-size: 17px;
                margin-bottom: 35px;
            }
            
            .modal-btn {
                font-size: 16px;
                padding: 16px 25px;
            }
            
            .modal h2 {
                font-size: 24px;
                margin-bottom: 30px;
            }
        }

        /* Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    <div class="game-container">
        <h1 class="title">Новогодняя Викторина - Карточки</h1>
        
        <div class="cards-container" id="cardsContainer">
            <!-- Карточки будут добавлены через JavaScript -->
        </div>
    </div>

    <div class="modal" id="questionModal">
        <div class="modal-content">
            <h2>✨ Новогодний Вопрос ✨</h2>
            <p id="questionText"></p>
            <div class="modal-buttons" id="answerButtons"></div>
            <div class="modal-feedback" id="feedback"></div>
        </div>
    </div>

    <script>
        // Волшебный список вопросов (теперь используем тематические вопросы)
        const questions = [];
        // Структура вопросов по темам
        const themeQuestions = {
            'Елочные Традиции': [
                {
                    question: "Какая страна считается родиной традиции украшать рождественскую елку?",
                    answers: ["Германия", "Россия", "Франция", "Англия"],
                    correct: 0
                },
                {
                    question: "Какой материал использовался для первых елочных игрушек?",
                    answers: ["Стекло", "Металл", "Дерево", "Керамика"],
                    correct: 0
                },
                {
                    question: "Какой цвет традиционно имеет рождественская елка?",
                    answers: ["Красный", "Синий", "Зеленый", "Золотой"],
                    correct: 2
                },
                {
                    question: "Как называется традиционное украшение вершины рождественской елки?",
                    answers: ["Ангел", "Звезда", "Снежинка", "Флюгер"],
                    correct: 1
                },
                {
                    question: "Какая страна традиционно поставляет елку для Рождества на Трафальгарской площади в Лондоне?",
                    answers: ["Норвегия", "Финляндия", "Канада", "Швеция"],
                    correct: 0
                }
            ],
            'Снежные Тайны': [
                {
                    question: "Какой самый редкий цвет снежинок в природе?",
                    answers: ["Голубой", "Красный", "Зеленый", "Снежинки всегда белые"],
                    correct: 1
                },
                {
                    question: "Как называется наука о снеге и снежных кристаллах?",
                    answers: ["Криология", "Снежинология", "Нивология", "Гляциология"],
                    correct: 2
                },
                {
                    question: "Какой самый большой снежный ком в мире был диаметром?",
                    answers: ["10 метров", "30 метров", "15 метров", "40 метров"],
                    correct: 1
                },
                {
                    question: "Какой ученый первым фотографировал снежинки?",
                    answers: ["Уилсон Бентли", "Альфред Уолтер", "Ганс Россбах", "Роберт Хук"],
                    correct: 0
                },
                {
                    question: "Какой самый большой снеговик в мире был высотой?",
                    answers: ["15 метров", "37 метров", "12 метров", "40 метров"],
                    correct: 1
                }
            ],
            'Подарки Мира': [
                {
                    question: "В какой стране традиционно дарят подарки на Новый год в формате 'капусты удачи'?",
                    answers: ["Германия", "Польша", "Украина", "Россия"],
                    correct: 2
                },
                {
                    question: "Какой самый популярный новогодний подарок в мире?",
                    answers: ["Игрушки", "Носки", "Книги", "Электроника"],
                    correct: 1
                },
                {
                    question: "В какой стране Санта Клаус известен как 'Папа Ноэль'?",
                    answers: ["Франция", "Бельгия", "Швейцария", "Канада"],
                    correct: 0
                },
                {
                    question: "Какой подарок считается традиционным в Великобритании в новогоднюю ночь?",
                    answers: ["Шляпа-клоун", "Носки", "Карточка", "Шоколад"],
                    correct: 1
                },
                {
                    question: "Какой элемент подарка традиционно включает в себя рождественский подарок в Испании?",
                    answers: ["Цветы", "Вино", "Песня", "Письмо"],
                    correct: 3
                }
            ],
            'Колокольчики': [
                {
                    question: "В какой культуре колокольчики используются для отпугивания злых духов в Новый год?",
                    answers: ["Японская", "Китайская", "Русская", "Скандинавская"],
                    correct: 1
                },
                {
                    question: "Какой звук колокольчика символизирует начало праздника в Японии?",
                    answers: ["Канно", "Фурина", "Сузу", "Гоэй"],
                    correct: 2
                },
                {
                    question: "Какой металл традиционно используется для изготовления рождественских колокольчиков?",
                    answers: ["Медь", "Серебро", "Олово", "Сталь"],
                    correct: 0
                },
                {
                    question: "Какой колокольчик в рождественской традиции самый маленький?",
                    answers: ["Тиннин", "Дингел", "Чиме", "Колокольчик эльфа"],
                    correct: 3
                },
                {
                    question: "Что символизирует звон колокольчика в рождественскую ночь?",
                    answers: ["Радость", "Память", "Молитву", "Надежду"],
                    correct: 2
                }
            ],
            'Звезды Надежды': [
                {
                    question: "Какая звезда считается символом Рождества?",
                    answers: ["Сириус", "Вифлеемская звезда", "Полярная звезда", "Венера"],
                    correct: 1
                },
                {
                    question: "Как называется рождественская звезда на латинском языке?",
                    answers: ["Stella Natalis", "Stella Polaris", "Stella Maris", "Stella Noctis"],
                    correct: 0
                },
                {
                    question: "Какая звезда, по преданию, указала волхвам путь к яслям?",
                    answers: ["Сириус", "Вифлеемская звезда", "Полярная звезда", "Альтаир"],
                    correct: 1
                },
                {
                    question: "Какую форму имеют традиционные рождественские звезды?",
                    answers: ["Шестиугольную", "Пятиконечную", "Восьмиугольную", "Четырехлучевую"],
                    correct: 1
                },
                {
                    question: "Какой астрономический объект часто ошибочно принимают за Вифлеемскую звезду?",
                    answers: ["Комету", "Планету", "Метеор", "Созвездие"],
                    correct: 1
                }
            ],
            'Оленьи Истории': [
                {
                    question: "Как звали первого упомянутого оленя Санты в литературе?",
                    answers: ["Рудольф", "Дешер", "Прэнцер", "Комет"],
                    correct: 1
                },
                {
                    question: "Какой олень является лидером упряжки Санты?",
                    answers: ["Блитцен", "Рудольф", "Дондер", "Кьюпид"],
                    correct: 1
                },
                {
                    question: "Сколько оленей управляло санями Санты в оригинальной поэме 1823 года?",
                    answers: ["8", "9", "6", "10"],
                    correct: 0
                },
                {
                    question: "Как зовут жену Рудольфа, красноносого оленя?",
                    answers: ["Клементайн", "Джульетта", "Мэри", "Дашерин"],
                    correct: 0
                },
                {
                    question: "Какой олень впервые появился в рождественской поэме 'Ночь перед Рождеством'?",
                    answers: ["Рудольф", "Огнивый", "Дондер", "Блитцен"],
                    correct: 3
                }
            ],
            'Деды Морозы': [
                {
                    question: "В какой стране Дед Мороз называется 'Папа Ноэль'?",
                    answers: ["Франция", "Бельгия", "Швейцария", "Канада"],
                    correct: 0
                },
                {
                    question: "Откуда родом традиция Деда Мороза?",
                    answers: ["Россия", "Германия", "Турция", "Швейцария"],
                    correct: 2
                },
                {
                    question: "Как зовут сказочную внучку Деда Мороза?",
                    answers: ["Снегурочка", "Метелица", "Вьюга", "Зимушка"],
                    correct: 0
                },
                {
                    question: "Где находится официальная резиденция Деда Мороза в России?",
                    answers: ["Москва", "Санкт-Петербург", "Великий Устюг", "Архангельск"],
                    correct: 2
                },
                {
                    question: "Какого цвета традиционно борода у Деда Мороза?",
                    answers: ["Черная", "Серая", "Белая", "Рыжая"],
                    correct: 2
                }
            ],
            'Фейерверки': [
                {
                    question: "В какой стране были изобретены фейерверки?",
                    answers: ["Греция", "Египет", "Китай", "Италия"],
                    correct: 2
                },
                {
                    question: "Какой химический элемент придает зеленый цвет фейерверкам?",
                    answers: ["Медь", "Стронций", "Барий", "Натрий"],
                    correct: 2
                },
                {
                    question: "Какой город запускает самый большой фейерверк в мире в новогоднюю ночь?",
                    answers: ["Нью-Йорк", "Токио", "Дубай", "Лондон"],
                    correct: 2
                },
                {
                    question: "Какой цвет НЕ получают из химических веществ в фейерверках?",
                    answers: ["Чисто-синий", "Ярко-зеленый", "Насыщенно-красный", "Ярко-желтый"],
                    correct: 0
                },
                {
                    question: "В каком веке были изобретены первые фейерверки?",
                    answers: ["X", "XI", "XII", "XIII"],
                    correct: 2
                }
            ],
            'Свечи Уюта': [
                {
                    question: "Какой религиозный праздник традиционно отмечается с зажжением свечей?",
                    answers: ["Рождество", "Пасха", "Троица", "Успение"],
                    correct: 0
                },
                {
                    question: "Из какого материала изготавливали первые церковные свечи?",
                    answers: ["Пчелиный воск", "Растительный жир", "Парафин", "Костный жир"],
                    correct: 0
                },
                {
                    question: "Какой символ имеет зажжение свечи в новогоднюю ночь?",
                    answers: ["Счастье", "Свет в дом", "Очищение", "Надежда"],
                    correct: 1
                },
                {
                    question: "Какой свечной праздник отмечается за неделю до Рождества?",
                    answers: ["Сретение", "Введение", "Вербное воскресенье", "Преподобный Серафим"],
                    correct: 0
                },
                {
                    question: "Какого цвета традиционно бывают свечи в рождественские праздники?",
                    answers: ["Красные", "Белые", "Золотые", "Синие"],
                    correct: 1
                }
            ],
            'Пряничные Сказки': [
                {
                    question: "Из какого города родом традиция имбирных пряников в форме человечков?",
                    answers: ["Нюрнберг", "Москва", "Гамлин", "Лейпциг"],
                    correct: 0
                },
                {
                    question: "Какой ингредиент придает пряникам характерный вкус?",
                    answers: ["Корица", "Мёд", "Имбирь", "Гвоздика"],
                    correct: 2
                },
                {
                    question: "Какой формы НЕ бывает у новогодних пряников?",
                    answers: ["Сердца", "Домика", "Снежинки", "Книги"],
                    correct: 3
                },
                {
                    question: "Какой пряник считается символом любви в рождественскую неделю?",
                    answers: ["Сердце", "Кольцо", "Домик", "Замок"],
                    correct: 0
                },
                {
                    question: "Какой пряник традиционно украшает рождественский стол в Германии?",
                    answers: ["Шварцвальд", "Лейбштюк", "Пфеффернут", "Цимтов"],
                    correct: 1
                }
            ],
            'Напитки Праздника': [
                {
                    question: "Как называется традиционный рождественский напиток из вина, специй и фруктов?",
                    answers: ["Эгг-ног", "Глинтвейн", "Mulled wine", "Сбитень"],
                    correct: 1
                },
                {
                    question: "Какой алкогольный напиток традиционно пьют в полночь 31 декабря в Испании?",
                    answers: ["Шампанское", "Вино", "Кава", "Ром"],
                    correct: 2
                },
                {
                    question: "Какой напиток подают в специальной посуде - 'бомбе' в Норвегии?",
                    answers: ["Глинтвейн", "Пунш", "Грог", "Ром"],
                    correct: 1
                },
                {
                    question: "Какой напиток традиционно пьют в Швеции во время праздника Святого Lucia?",
                    answers: ["Глинтвейн", "Сафья", "Пунш", "Квас"],
                    correct: 1
                },
                {
                    question: "Какой алкогольный напиток традиционно готовят в Польше на Рождество?",
                    answers: ["Водка", "Медовуха", "Вино", "Наливка"],
                    correct: 1
                }
            ],
            'Маскарады': [
                {
                    question: "В какой стране проходит самый известный новогодний маскарад?",
                    answers: ["Италия", "Франция", "Бразилия", "Венгрия"],
                    correct: 0
                },
                {
                    question: "Какой маскарадный персонаж является символом Нового года в Италии?",
                    answers: ["Пьеро", "Арлекин", "Пагагино", "Коломбина"],
                    correct: 2
                },
                {
                    question: "Какой маскарадный костюм НЕ является традиционным для новогодних праздников?",
                    answers: ["Санта Клаус", "Дед Мороз", "Клоун", "Снегурочка"],
                    correct: 2
                },
                {
                    question: "Какой маскарадный элемент символизирует скрытие личности в новогоднюю ночь?",
                    answers: ["Маска", "Перчатки", "Плащ", "Шляпа"],
                    correct: 0
                },
                {
                    question: "Какой цвет преобладает в венецианских маскарадных костюмах на Рождество?",
                    answers: ["Золотой", "Серебряный", "Белый", "Красный"],
                    correct: 0
                }
            ],
            'Замки Мечты': [
                {
                    question: "Какой замок традиционно ассоциируется с рождественской сказкой?",
                    answers: ["Нойшванштайн", "Версаль", "Эдинбург", "Бларни"],
                    correct: 0
                },
                {
                    question: "В каком замке проходит рождественская ярмарка, существующая с 16-го века?",
                    answers: ["Замок Нойшванштайн", "Замок Хоэнцоллерн", "Замок Прода", "Замок Венсен"],
                    correct: 1
                },
                {
                    question: "Какой замок в сказках часто становится местом зимней волшебной встречи?",
                    answers: ["Замок Спящей Красавицы", "Замок Зимней Сказки", "Замок Снежной королевы", "Замок Мороза"],
                    correct: 2
                },
                {
                    question: "Какой замок украшают специальными рождественскими огнями в Великобритании?",
                    answers: ["Виндзорский замок", "Букингемский дворец", "Эдинбургский замок", "Тауэр"],
                    correct: 0
                },
                {
                    question: "Какой замок традиционно считается домом Деда Мороза в северной Европе?",
                    answers: ["Карлсборг", "Сова", "Корко", "Аль-Хусн"],
                    correct: 0
                }
            ],
            'Песни Зимы': [
                {
                    question: "Какая самая известная рождественская песня в мире?",
                    answers: ["Jingle Bells", "Silent Night", "We Wish You a Merry Christmas", "White Christmas"],
                    correct: 1
                },
                {
                    question: "Какая песня считается самой продаваемой в мире?",
                    answers: ["White Christmas", "Happy Xmas", "Jingle Bells", "Rudolph the Red-Nosed Reindeer"],
                    correct: 0
                },
                {
                    question: "Какая русская новогодняя песня исполняется на протяжении десятилетий?",
                    answers: ["Калинка", "В лесу родилась елочка", "Священная ночь", "С добрым утром"],
                    correct: 1
                },
                {
                    question: "Какая рождественская песня впервые была исполнена в космосе?",
                    answers: ["Jingle Bells", "Silent Night", "We Wish You a Merry Christmas", "O Little Town of Bethlehem"],
                    correct: 0
                },
                {
                    question: "Какой композитор написал 'Тихая ночь, святая ночь'?",
                    answers: ["Франц Шуберт", "Франц Грибер", "Иоганн Себастьян Бах", "Вольфганг Амадей Моцарт"],
                    correct: 1
                }
            ],
            'Королевства': [
                {
                    question: "Какое королевство первым официально приняло Рождество как праздник?",
                    answers: ["Англия", "Норвегия", "Швеция", "Нидерланды"],
                    correct: 0
                },
                {
                    question: "Какая королевская особа традиционно произносит рождественское обращение к нации?",
                    answers: ["Королева Великобритании", "Король Испании", "Король Швеции", "Королева Нидерландов"],
                    correct: 0
                },
                {
                    question: "В каком королевстве традиционно проводят Рождество с особой церемонией?",
                    answers: ["Дания", "Норвегия", "Швеция", "Великобритания"],
                    correct: 3
                },
                {
                    question: "Какой королевский двор традиционно организует рождественские представления?",
                    answers: ["Британский", "Шведский", "Датский", "Норвежский"],
                    correct: 0
                },
                {
                    question: "Какой королевский замок традиционно украшают к Рождеству в Великобритании?",
                    answers: ["Букингемский", "Виндзорский", "Холируд", "Все перечисленные"],
                    correct: 3
                }
            ],
            'Волшебство': [
                {
                    question: "Какой магический элемент часто ассоциируется с рождественскими чарами?",
                    answers: ["Кристаллы", "Снег", "Звезды", "Огонь"],
                    correct: 1
                },
                {
                    question: "Какой волшебный предмет позволяет исполнить рождественские желания?",
                    answers: ["Волшебная палочка", "Звезда на елке", "Снегурочка", "Рождественский носок"],
                    correct: 1
                },
                {
                    question: "Какой магический символ появляется в полночь 31 декабря?",
                    answers: ["Снежинка", "Падающая звезда", "Северное сияние", "Полумесяц"],
                    correct: 1
                },
                {
                    question: "Какой волшебный атрибут помогает увидеть рождественское чудо?",
                    answers: ["Волшебные очки", "Снежинка", "Звездная пыль", "Святой огонь"],
                    correct: 2
                },
                {
                    question: "Какой волшебный элемент используется для защиты дома в новогоднюю ночь?",
                    answers: ["Соль", "Вода", "Огонь", "Земля"],
                    correct: 0
                }
            ],
            'Карнавалы': [
                {
                    question: "В каком городе проходит самый известный новогодний карнавал в Европе?",
                    answers: ["Париж", "Мюнхен", "Венеция", "Барселона"],
                    correct: 2
                },
                {
                    question: "Какой карнавальный элемент традиционно носит маскарадный персонаж Пагагино?",
                    answers: ["Маска", "Колпак", "Накидка", "Цветок"],
                    correct: 0
                },
                {
                    "question": "Какой цвет преобладает в карнавальных костюмах на новогодних праздниках в Венеции?",
                    "answers": ["Золотой", "Серебряный", "Черный", "Белый"],
                    "correct": 0
                },
                {
                    question: "Какой карнавальный элемент используется для создания атмосферы праздника?",
                    answers: ["Конфетти", "Шары", "Ленты", "Маски"],
                    correct: 3
                },
                {
                    question: "Какой карнавал традиционно завершается балом в замке?",
                    answers: ["Венецианский", "Пражский", "Венский", "Берлинский"],
                    correct: 2
                }
            ],
            'Искусство': [
                {
                    question: "Какой художник создал знаменитую картину 'Рождество' в 19-ом веке?",
                    answers: ["Клод Моне", "Карл Брюллов", "Арнольд Бёклин", "Иван Айвазовский"],
                    correct: 2
                },
                {
                    question: "Какой стиль искусства часто используется для изображения рождественских сцен?",
                    answers: ["Романтизм", "Реализм", "Импрессионизм", "Символизм"],
                    correct: 0
                },
                {
                    question: "Какой вид искусства традиционно связан с рождественскими ярмарками?",
                    answers: ["Живопись", "Скульптура", "Ремесленное искусство", "Музыка"],
                    correct: 2
                },
                {
                    question: "Какой элемент рождественского искусства часто изображается витражами?",
                    answers: ["Сцены из жизни Христа", "Пейзажи", "Портреты", "Абстракции"],
                    correct: 0
                },
                {
                    question: "Какой вид искусства традиционно используется для украшения рождественской елки?",
                    answers: ["Скульптура", "Декоративно-прикладное", "Графика", "Фотография"],
                    correct: 1
                }
            ],
            'Легенды': [
                {
                    question: "Как зовут легендарного снежного человека, связанного с зимними праздниками?",
                    answers: ["Снежный человек", "Альмасты", "Йети", "Баба Яга"],
                    correct: 2
                },
                {
                    question: "Какой мифический персонаж приносит подарки детям в ночь на Рождество?",
                    answers: ["Клаус", "Санта", "Мороз", "Волшебник"],
                    correct: 0
                },
                {
                    question: "Какая легенда связывает рождение рождественской звезды с рождением Иисуса?",
                    answers: ["Легенда о волхвах", "Легенда о пастухах", "Легенда о царе Ироде", "Легенда о магах"],
                    correct: 0
                },
                {
                    question: "Как зовут волшебную помощницу Деда Мороза в русской культуре?",
                    answers: ["Снегурочка", "Метелица", "Зима", "Вьюга"],
                    correct: 0
                },
                {
                    question: "Какой сказочный персонаж может превратить тыкву в карету для рождественского бала?",
                    answers: ["Фея", "Колдунья", "Волшебник", "Елочный дух"],
                    correct: 0
                }
            ],
            'Праздники Мира': [
                {
                    question: "Какой самый большой в мире рождественский рынок?",
                    answers: ["Берлин", "Прага", "Вена", "Страсбург"],
                    correct: 3
                },
                {
                    question: "В какой стране традиционно отмечают самый продолжительный рождественский праздник?",
                    answers: ["Финляндия", "Италия", "Филиппины", "Испания"],
                    correct: 2
                },
                {
                    question: "Какой праздник объединяет христиан разных конфессий по всему миру?",
                    answers: ["Пасха", "Рождество", "Троица", "Успение"],
                    correct: 1
                },
                {
                    question: "Какой новогодний праздник отмечают в Японии с особыми ритуалами?",
                    answers: ["О-сёдзин", "Ханукка", "Рождество", "Новый год по лунному календарю"],
                    correct: 0
                },
                {
                    question: "В какой стране Новый год начинается с поедания 12 виноградин?",
                    answers: ["Испания", "Португалия", "Аргентина", "Мексика"],
                    correct: 0
                }
            ]
        };

        let currentQuestion = null;
        let currentCard = null;

        // Создаем волшебные парящие частицы
        function createFloatingParticles() {
            const particlesContainer = document.getElementById('particles');
            const particleCount = 40;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + 'vw';
                particle.style.top = Math.random() * 100 + 'vh';
                particle.style.width = Math.random() * 6 + 2 + 'px';
                particle.style.height = particle.style.width;
                particle.style.opacity = Math.random() * 0.6 + 0.2;
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = Math.random() * 6 + 4 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        // Создаем карточки
        function createCards() {
            const cardsContainer = document.getElementById('cardsContainer');
            const cardData = [
                { icon: '🎄', title: 'Елочные Традиции' },
                { icon: '❄️', title: 'Снежные Тайны' },
                { icon: '🎁', title: 'Подарки Мира' },
                { icon: '🔔', title: 'Колокольчики' },
                { icon: '🌟', title: 'Звезды Надежды' },
                { icon: '🦌', title: 'Оленьи Истории' },
                { icon: '🎅', title: 'Деды Морозы' },
                { icon: '🎆', title: 'Фейерверки' },
                { icon: '🕯️', title: 'Свечи Уюта' },
                { icon: '🍪', title: 'Пряничные Сказки' },
                { icon: '🍷', title: 'Напитки Праздника' },
                { icon: '🎭', title: 'Маскарады' },
                { icon: '🏰', title: 'Замки Мечты' },
                { icon: '🎵', title: 'Песни Зимы' },
                { icon: '👑', title: 'Королевства' },
                { icon: '🔮', title: 'Волшебство' },
                { icon: '🎪', title: 'Карнавалы' },
                { icon: '🎨', title: 'Искусство' },
                { icon: '📚', title: 'Легенды' },
                { icon: '🌍', title: 'Праздники Мира' }
            ];

            cardData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.innerHTML = `
                    <div class="card-icon">${card.icon}</div>
                    <div class="card-title">${card.title}</div>
                `;
                cardElement.dataset.index = index;
                
                // Добавляем обработчик для быстрых кликов
                let clickCount = 0;
                let clickTimer = null;
                
                cardElement.addEventListener('click', (event) => {
                    // Вызываем эффект клика
                    createClickEffect(event);
                    
                    // Проверяем быстрые клики для активации волшебной скорости
                    clickCount++;
                    if (clickTimer) {
                        clearTimeout(clickTimer);
                    }
                    
                    clickTimer = setTimeout(() => {
                        clickCount = 0;
                    }, 500); // 500мс для распознавания быстрых кликов
                    
                    if (clickCount === 3) {
                        activateMagicSpeed();
                        clickCount = 0;
                    }
                    
                    showQuestion(index);
                });
                
                cardsContainer.appendChild(cardElement);
                
                // Добавляем задержку для анимации появления
                cardElement.style.animationDelay = `${index * 0.1}s`;
            });
        }

        function showQuestion(cardIndex) {
            // Получаем название темы по индексу
            const cardTitles = [
                'Елочные Традиции', 'Снежные Тайны', 'Подарки Мира', 'Колокольчики', 
                'Звезды Надежды', 'Оленьи Истории', 'Деды Морозы', 'Фейерверки', 
                'Свечи Уюта', 'Пряничные Сказки', 'Напитки Праздника', 'Маскарады', 
                'Замки Мечты', 'Песни Зимы', 'Королевства', 'Волшебство', 
                'Карнавалы', 'Искусство', 'Легенды', 'Праздники Мира'
            ];
            
            const themeName = cardTitles[cardIndex];
            const themeQs = themeQuestions[themeName];
            
            // Выбираем случайный вопрос из темы
            const randomQuestion = themeQs[Math.floor(Math.random() * themeQs.length)];
            currentQuestion = randomQuestion;
            currentCard = document.querySelector(`.card[data-index="${cardIndex}"]`);
            
            document.getElementById('questionText').textContent = randomQuestion.question;
            
            const answerButtons = document.getElementById('answerButtons');
            answerButtons.innerHTML = '';
            
            randomQuestion.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'modal-btn';
                button.textContent = answer;
                button.onclick = () => checkAnswer(index, cardIndex);
                answerButtons.appendChild(button);
            });
            
            document.getElementById('feedback').textContent = '';
            document.getElementById('questionModal').classList.add('active');
        }

        function checkAnswer(selectedIndex, cardIndex) {
            const feedback = document.getElementById('feedback');
            const card = document.querySelector(`.card[data-index="${cardIndex}"]`);
            
            if (selectedIndex === currentQuestion.correct) {
                feedback.textContent = 'Правильно! 🎉';
                feedback.style.color = '#27ae60';
                card.classList.add('correct-glow');
                
                // Создаем эффект фейерверка при правильном ответе
                createFireworkEffect();
                
                // Воспроизводим звук поздравления при правильном ответе
                playCelebrationSound();
                
                // Проверяем возможность получения новогоднего бонуса
                checkBonusChance();
            } else {
                feedback.textContent = 'Почти правильно! 💫';
                feedback.style.color = '#e74c3c';
                card.classList.add('incorrect-glow');
            }
            
            // Если активирован режим волшебной скорости, уменьшаем время до закрытия модального окна
            const closeTime = magicSpeedMode ? 1500 : 3000;
            
            // Закрываем модальное окно через определенное время
            setTimeout(() => {
                document.getElementById('questionModal').classList.remove('active');
            }, closeTime);
        }

        // Создаем волшебный падающий снег
        function createMagicalSnow() {
            const container = document.body;
            const snowflakes = 120;
            
            for (let i = 0; i < snowflakes; i++) {
                const snow = document.createElement('div');
                snow.className = 'snow';
                const size = Math.random() * 12 + 6;
                snow.style.width = size + 'px';
                snow.style.height = size + 'px';
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.top = '-30px';
                snow.style.opacity = Math.random() * 0.7 + 0.2;
                snow.style.animation = `fall ${Math.random() * 8 + 6}s linear infinite`;
                snow.style.animationDelay = Math.random() * 10 + 's';
                snow.style.animation += `, rotate ${Math.random() * 6 + 3}s linear infinite, float-snow ${Math.random() * 5 + 2}s ease-in-out infinite`;
                container.appendChild(snow);
            }
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fall {
                    to { transform: translateY(110vh) translateX(${Math.random() * 80 - 40}px); }
                }
                @keyframes rotate {
                    to { transform: rotate(${Math.random() > 0.5 ? 360 : -360}deg); }
                }
                @keyframes float-snow {
                    0%, 100% { transform: translateY(0) translateX(0); }
                    25% { transform: translateY(-15px) translateX(8px); }
                    50% { transform: translateY(-8px) translateX(-12px); }
                    75% { transform: translateY(-20px) translateX(4px); }
                }
            `;
            document.head.appendChild(style);
        }

        // Создаем эффект при клике на карточку
        function createClickEffect(event) {
            const clickX = event.clientX;
            const clickY = event.clientY;
            
            // Создаем волшебный эффект при клике
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.style.position = 'fixed';
                sparkle.style.left = clickX + 'px';
                sparkle.style.top = clickY + 'px';
                sparkle.style.width = '10px';
                sparkle.style.height = '10px';
                sparkle.style.borderRadius = '50%';
                sparkle.style.backgroundColor = getRandomColor();
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '9999';
                sparkle.style.opacity = '0.8';
                sparkle.style.transform = `scale(${Math.random() * 0.8 + 0.2})`;
                
                document.body.appendChild(sparkle);
                
                // Анимация для искры
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 50 + 30;
                const moveX = Math.cos(angle) * distance;
                const moveY = Math.sin(angle) * distance;
                
                sparkle.animate([
                    { transform: `translate(0, 0) scale(${Math.random() * 0.8 + 0.2})`, opacity: 0.8 },
                    { transform: `translate(${moveX}px, ${moveY}px) scale(0)`, opacity: 0 }
                ], {
                    duration: Math.random() * 1000 + 800,
                    easing: 'ease-out'
                });
                
                // Удаляем элемент после анимации
                setTimeout(() => {
                    sparkle.remove();
                }, 1800);
            }
        }

        // Функция активации режима волшебной скорости
        function activateMagicSpeed() {
            magicSpeedMode = true;
            
            // Меняем стиль карточек для визуального эффекта
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                card.style.animation = 'speedGlow 0.5s infinite alternate';
            });
            
            // Добавляем стиль для анимации
            const style = document.createElement('style');
            style.textContent = `
                @keyframes speedGlow {
                    from { box-shadow: 0 10px 25px rgba(0,0,0,0.4), inset 0 0 15px rgba(255,215,0,0.1); }
                    to { box-shadow: 0 10px 35px rgba(46,204,113,0.8), inset 0 0 25px rgba(46,204,113,0.5); }
                }
            `;
            document.head.appendChild(style);
            
            // Показываем сообщение пользователю
            showMessage("✨ Режим волшебной скорости активирован! ✨");
        }

        // Функция проверки шанса на бонус
        function checkBonusChance() {
            // 20% шанс получить бонус при правильном ответе
            if (Math.random() < 0.2) {
                setTimeout(() => {
                    showBonusMessage();
                }, 1000);
            }
        }
        
        // Функция показа бонусного сообщения
        function showBonusMessage() {
            const bonusMessages = [
                "🎁 Бонус! Получите дополнительный вопрос!",
                "✨ Волшебный бонус! Еще один вопрос для вас!",
                "🌟 Новогодняя удача! Дополнительная попытка!",
                "🎊 Праздничный бонус! Продолжайте викторину!",
                "🎄 Новогоднее волшебство! Дополнительный шанс!"
            ];
            
            showMessage(bonusMessages[Math.floor(Math.random() * bonusMessages.length)]);
            
            // Через некоторое время показываем дополнительный вопрос
            setTimeout(() => {
                // Выбираем случайную карточку и "нажимаем" на нее
                const cards = document.querySelectorAll('.card');
                const randomCard = cards[Math.floor(Math.random() * cards.length)];
                randomCard.click();
            }, 2000);
        }

        // Функция для получения случайного цвета
        function getRandomColor() {
            const colors = [
                '#FFD700', // Золотой
                '#FF6B6B', // Красный
                '#4ECDC4', // Бирюзовый
                '#FFE66D', // Желтый
                '#C7F464', // Зеленый
                '#FF6B6B', // Красный
                '#6A0572'  // Фиолетовый
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Функция для воспроизведения звука поздравления
        function playCelebrationSound() {
            try {
                // Создаем аудиоконтекст для генерации звука
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Настройка параметров звука для праздничного эффекта
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // До
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // Ми
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2); // Соль
                oscillator.frequency.setValueAtTime(1046.50, audioContext.currentTime + 0.3); // До высокий
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("Не удалось воспроизвести звук: " + e);
            }
        }

        // Функция для создания эффекта фейерверка
        function createFireworkEffect() {
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.style.position = 'fixed';
                    firework.style.width = '8px';
                    firework.style.height = '8px';
                    firework.style.borderRadius = '50%';
                    firework.style.backgroundColor = getRandomColor();
                    firework.style.pointerEvents = 'none';
                    firework.style.zIndex = '9998';
                    firework.style.left = (Math.random() * window.innerWidth) + 'px';
                    firework.style.top = (Math.random() * window.innerHeight) + 'px';
                    
                    document.body.appendChild(firework);
                    
                    // Анимация для фейерверка
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 100 + 50;
                    const moveX = Math.cos(angle) * distance;
                    const moveY = Math.sin(angle) * distance;
                    
                    firework.animate([
                        { transform: `translate(0, 0)`, opacity: 1 },
                        { transform: `translate(${moveX}px, ${moveY}px)`, opacity: 0 }
                    ], {
                        duration: Math.random() * 1000 + 1000,
                        easing: 'cubic-bezier(0.165, 0.840, 0.440, 1.000)'
                    });
                    
                    // Удаляем элемент после анимации
                    setTimeout(() => {
                        firework.remove();
                    }, 2000);
                }, i * 50); // Создаем элементы с небольшой задержкой для создания эффекта взрыва
            }
        }

        // Функция показа сообщения
        function showMessage(text) {
            const message = document.createElement('div');
            message.textContent = text;
            message.style.position = 'fixed';
            message.style.top = '20px';
            message.style.left = '50%';
            message.style.transform = 'translateX(-50%)';
            message.style.backgroundColor = 'rgba(39, 174, 96, 0.9)';
            message.style.color = 'white';
            message.style.padding = '15px 30px';
            message.style.borderRadius = '30px';
            message.style.fontSize = '20px';
            message.style.fontWeight = 'bold';
            message.style.zIndex = '10000';
            message.style.boxShadow = '0 5px 15px rgba(0,0,0,0.3)';
            message.style.animation = 'messageSlide 3s forwards';
            
            // Добавляем анимацию для сообщения
            const style = document.createElement('style');
            style.textContent = `
                @keyframes messageSlide {
                    0% { top: -50px; opacity: 0; }
                    10% { top: 20px; opacity: 1; }
                    90% { top: 20px; opacity: 1; }
                    100% { top: -50px; opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(message);
            
            // Удаляем сообщение после анимации
            setTimeout(() => {
                message.remove();
            }, 3000);
        }

        // Инициализация игры
        document.addEventListener('DOMContentLoaded', () => {
            createCards();
            createMagicalSnow();
            createFloatingParticles();
        });
    </script>
</body>
</html>


